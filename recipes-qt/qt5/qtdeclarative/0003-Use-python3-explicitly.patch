From 78baea7367cd6a3d7c07861374dbdaac7674b14e Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Tue, 26 Nov 2019 21:10:03 -0800
Subject: [PATCH] Use python3 explicitly

Signed-off-by: Khem Raj <raj.khem@gmail.com>
---
Upstream-Status: Backport [5.15 has slightly different implementation https://codereview.qt-project.org/c/qt/qtdeclarative/+/300934]

 qtdeclarative.pro                         | 2 +-
 src/3rdparty/masm/masm.pri                | 4 ++--
 tests/auto/qml/ecmascripttests/test262.py | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/qtdeclarative.pro b/qtdeclarative.pro
index 5b94da9b69..0e3496ce80 100644
--- a/qtdeclarative.pro
+++ b/qtdeclarative.pro
@@ -2,7 +2,7 @@ CONFIG += tests_need_tools examples_need_tools
 load(qt_parts)
 
 !python_available {
-    py_out = $$system('python -c "print(1)"')
+    py_out = $$system('python3 -c "print(1)"')
     !equals(py_out, 1): error("Building QtQml requires Python.")
     tmp = python_available
     CONFIG += $$tmp
diff --git a/src/3rdparty/masm/masm.pri b/src/3rdparty/masm/masm.pri
index 0e63ac2ce5..7a30ab64eb 100644
--- a/src/3rdparty/masm/masm.pri
+++ b/src/3rdparty/masm/masm.pri
@@ -58,7 +58,7 @@ contains(DEFINES, WTF_USE_UDIS86=1) {
     udis86.output = udis86_itab.h
     udis86.input = ITAB
     udis86.CONFIG += no_link
-    udis86.commands = python $$PWD/disassembler/udis86/itab.py ${QMAKE_FILE_IN}
+    udis86.commands = python3 $$PWD/disassembler/udis86/itab.py ${QMAKE_FILE_IN}
     QMAKE_EXTRA_COMPILERS += udis86
 
     udis86_tab_cfile.target = $$OUT_PWD/udis86_itab.c
@@ -113,7 +113,7 @@ retgen.output = $$GENERATEDDIR/RegExpJitTables.h
 retgen.script = $$PWD/yarr/create_regex_tables
 retgen.input = retgen.script
 retgen.CONFIG += no_link
-retgen.commands = python $$retgen.script > ${QMAKE_FILE_OUT}
+retgen.commands = python3 $$retgen.script > ${QMAKE_FILE_OUT}
 QMAKE_EXTRA_COMPILERS += retgen
 
 # Taken from WebKit/Tools/qmake/mkspecs/features/unix/default_post.prf
diff --git a/tests/auto/qml/ecmascripttests/test262.py b/tests/auto/qml/ecmascripttests/test262.py
index 19551e3ba2..bf3f79a45f 100755
--- a/tests/auto/qml/ecmascripttests/test262.py
+++ b/tests/auto/qml/ecmascripttests/test262.py
@@ -1,4 +1,4 @@
-#!/usr/bin/env python
+#!/usr/bin/env python3
 #############################################################################
 ##
 ## Copyright (C) 2017 The Qt Company Ltd.
